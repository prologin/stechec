%LaTeX Document

%\documentclass[a4paper,twoside,12pt]{book}
\documentclass[a4paper,twoside,12pt]{article}

\usepackage{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{a4}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{fancyhdr}
\usepackage{palatino}
\usepackage{subfigure}
\usepackage{verbatim,fancyvrb}
\usepackage{listings}
\usepackage{array}
\usepackage{color}

\definecolor{colIdentifier}{gray}{0}
\definecolor{colKeys}{rgb}{0,0,0.6}
\lstnewenvironment{lst-c++}{%
\lstset{%
language=C++,
identifierstyle=\color{colIdentifier},
keywordstyle=\color{colKeys},
basicstyle=\ttfamily\small
}}{}
\renewcommand\ttdefault{cmtt}

\newcommand{\functitle}[1]{%
\vspace{0.5cm}
$\bullet$ \underline{\textbf{#1}}
}

%\NoAutoSpaceBeforeFDP
\geometry{bindingoffset=5mm,hmarginratio=1:1,heightrounded,headheight=15pt}

\makeindex

\begin{document}
\pagestyle{empty}
\sloppy

%\lhead[\textsl{Prologin 2009}]{\nouppercase \leftmark}
%\rhead[Sujet de la finale]{}
\lhead[\thepage]{\nouppercase \leftmark}
\rhead[\textsl{Prologin 2009} --- Sujet de la finale]{\thepage}
\cfoot{}

% Couverture =========================================================
\begin{titlepage}
\begin{center}
\includegraphics[width=\linewidth]{logo.png}\\ %% FIXME: Logo 2009
\vspace{4cm}
\Huge
\textbf{La conquête de l'est}\\
\Large
\textbf{La loi du plus riche}\\
\vspace{2cm}
\normalsize
Sujet de la finale du Concours National d'Informatique\\
Vendredi 01 mai 2009\\
\end{center}
\end{titlepage}

% Sommaire ===========================================================
\cleardoublepage
\tableofcontents

% Corps ==============================================================
%\cleardoublepage
\setcounter{page}{1}
\pagestyle{fancy}
\parskip=6pt plus 3pt

\newpage
\includegraphics[width=\linewidth]{image.png}\\
\newpage
\section{Introduction}

  \subsection{Prélude}
    Pour la première fois depuis des semaines, le téléphone sonna.

      -- Allô, répondis-je machinalement.

      -- C'est moi, m'indiqua le téléphone. J'ai un plan à te proposer.

    Je reconnus aussitôt mon interlocuteur. J'avais travaillé avec lui à plusieurs
    reprises ces dernières années, nos collaborations avaient alors été tantôt à
    peine légales, tantôt complètement illégales. C'est d'ailleurs de là que
    provenait la plupart de ma richesse. C'est fini, m'étais-je alors promis
    quelques mois auparavant, seuls les pauvres ont besoin de prendre des risques.
    Depuis, je me contentais de mes économies et de mon travail de maçon.
    Toutefois, avant que je ne pusse protester, le téléphone enchaîna :

      -- C'est un \emph{gros} plan. Sans risque.

    Il m'expliqua ensuite le concept, qui faisait intervenir ma propre expérience,
    mes compétences personnelles, puis, malgré ma réticence initiale, je fus
    convaincu : non pas que j'eusse un besoin d'argent immédiat, mais cela
    pourrait m'assurer définitivement quelque longue retraite paisible.

    Quelques heures plus tard, je prenais le bateau.

  \subsection{Votre mission}
    Votre mission, que vous acceptez, est de construire, faire
    fructifier et, surtout, prendre le pouvoir de la ville dans
    laquelle vous vous installez, avec tous les moyens dont peuvent
    disposer les honnêtes citoyens : argent, corruption, sabotage et plus
    encore\ldots{}  Pour diriger une ville, chacun le sait, rien n'est plus
    efficace que la loi du plus riche.

  \subsection{Le plateau de jeu}
    Le terrain sur lequel vous allez mener votre ville à son apogée
    est un grand plateau semé d'herbe verdoyante, de cerisiers en fleurs et
    d'ossements dissimulés dans les fondations des bâtiments en construction.
    La plaine s'étend à perte de vue ; ainsi votre possibilité d'extension ne
    semble-t-elle limitée que par votre désir de puissance et le nombre de
    billets en votre possession.\footnote{La carte fait en réalité 
    TAILLE\_CARTE * TAILLE\_CARTE cases, ce qui revient généralement à un terrain de jeu
    illimité, dans des conditions normales}

      \subsubsection{La zone de départ}
	Le plateau ne comporte, au début, qu'une seule et unique portion de
	route\footnote{située en x(TAILLE\_CARTE / 2) et y(TAILLE\_CARTE / 2)}
	autour de laquelle va se développer la ville.

  \subsection{Le rouble, une monnaie forte !}
    Le rouble est la monnaie locale à très forte valeur sur l'île. Vous débutez
    avec les économies que vous avez durement gagnées lors de vos précédentes
    missions, c'est-à-dire ARGENT\_INITIAL\footnote{cf. API} roubles.

    \includegraphics[width=\linewidth]{rouble.jpg}

  \subsection{Chacun mon tour}
    Chaque tour est donc composé de 3 phases. Dans la première phase,
    chacun joue successivement et a la possibilité de construire des
    routes et des maisons. Dans la deuxième phase, vous vous affrontez
    sans merci dans une lutte pour la corruption afin de jouir du
    privilège d'agir seul dans la troisième phase.

    À la fin du tour, l'ordre des joueurs dans la première phase change :
    celui qui jouait en deuxième joue en premier, le troisième devient le
    deuxième et le premier passe dernier. Cela permet d'assurer une
    certaine équité.

  \subsection{La concurrence}
    La concurrence est rude dans le domaine, d'autres ont flairé le bon coup.
    Deux autres joueurs\footnote{Dans des conditions réelles de jeu, vous serez
    donc trois, vous inclus} tenteront de vous surpasser. Tout le monde se
    connaît dans le domaine et, vu votre passé et celui de vos adversaires, il est
    évident que vous êtes fiché. Vous ne connaissez d'ailleurs pas leur nom,
    mais uniquement leur matricule\footnote{Il s'agit de l'identifiant des joueurs
    renvoyé par les fonctions du jeu}. Le vôtre est 0 tandis que ceux des deux
    autres \emph{investisseurs} sont 1 et 2.

\newpage
\section{Phase I} % Construction des routes, ordre des joueurs

  \subsection{L'installation}

    Voilà quelque temps que je m'étais installé sur cette île. Avec mes ouvriers,
    j'avais déjà construit deux maisons et il fallait que j'en construisisse plus,
    m'avait-on dit. Mais tout cela coûtait bien cher, mon budget s'amenuisait,
    tout comme ma confiance : personne ne voulait de ces logements. Après tout,
    qui aurait pu souhaiter venir ici, sur cette île où, même si le climat était
    idéal et le cadre sublime, il n'y avait pour ainsi dire aucun confort, aucun
    modernisme et peu d'accès à la civilisation ?

    Le téléphone, interrompant mes pensées, sonna et m'informa :

      -- La mairie a l'intention de construire un parc aquatique par ici : piscines
      chauffées, toboggans, jacuzzis et tout le toutim. Cela devrait attirer les
      touristes sur l'île.

      -- Et ainsi faire monter le prix des logements, continuai-je. C'est une très
      bonne nouvelle, mais sais-tu exactement où il sera construit ?

      -- Ce n'est pas encore décidé. Évidemment, si tu sais te montrer
      \emph{convaincant}, nul doute que tu pourras influer sur ce choix.
      Après cette brève discussion, je fis successivement des prévisions, des
      estimations, des calculs, puis un virement bancaire.

  \subsection{Constructions}
    \subsubsection{Tarifs}

      Vous avez l'occasion de construire gratuitement une route, ainsi qu'une
      maison à chaque tour. Vous pouvez aussi dépenser une fois par tour un
      rouble\footnote{On avait dit que c'était une monnaie forte.} pour, à
      nouveau, construire une route et une maison supplémentaires. Il vous est
      également possible, et ce, autant de fois que vous le désirez, de
      construire jusqu'à deux routes en payant un rouble.

    \subsubsection{Architecture}
      Même les personnes les plus influentes ont des règles à respecter et vous
      n'échappez pas à la règle, malgré les nombreux dessous de table que vous
      avez pu verser. Afin que l'île ne ressemble pas à celle du roi
      Minos\footnote{et parce que vous ne vous appelez pas Dédale}, les règles
      suivantes, découlant du bon sens, sont imposées :
	\begin{itemize}
	  \item toute route doit être adjacente à une autre route (diagonales
	    exclues) ;
	  \item toute maison et tout bâtiment spécial doivent être adjacents à
	    une route (diagonales incluses) ;
	  \item une maison ou un bâtiment spécial ne doit, en aucun cas, bloquer
	    le jeu. Une route doit toujours être accessible de l'extérieur par
	    l'une de ses quatre connexités.
	\end{itemize}
    \vspace{1cm}
    \begin{figure}[!h]
    \centering
    \includegraphics{build.png}
    \caption{Constructions possibles par rapport à la portion de route centrale}
    \end{figure}
    \subsubsection{Valeur des biens et propriété}
      Les routes n'ont aucune valeur financière et ne vous appartiennent pas.
      Dans votre infinie bonté, vous les construisez pour le solde de la mairie
      qui vous le rend bien en vous autorisant à construire autour de
      celles-ci.

      Les maisons, par défaut, valent 1 rouble et vous appartiennent totalement
      jusqu'à ce que vous les vendiez. Libre à vous d'en faire ce que vous
      voulez. La valeur d'une maison ne peut en aucun cas être négative, mais
      elle peut être nulle.

\newpage
\section{Phase II} % Corruption, système d'enchère

  \subsection{La concurrence}
    Bien sûr, d'autres personnes cherchèrent à corrompre le maire pour tirer
    profit de cette opportunité, mais aucune ne proposa autant que moi.
    Rapidement, les travaux débutèrent et, au bout de quelques mois, mes terrains
    prirent beaucoup de valeur. Je décidai alors de construire plus pour gagner
    plus. À la même époque, l'on m'apprit d'autres projets de la mairie : cinéma,
    médiathèque, musée et aussi parc d'attractions étaient prévus, sans toutefois
    que l'on pût me donner de date, ni même d'ordre dans les plans. Il y
    avait de plus un projet d'aéroport, mais je ferais tout mon possible pour le
    tenir loin de mes habitations, puisque le bruit engendré par les avions
    pourrait nuire fortement à l'immobilier.

  \subsection{Les bâtiments exceptionnels}
    Régulièrement, la mairie décide de construire des bâtiments importants pour
    la ville. Mais ce n'est pas parce que vous n'avez pas eu vent des appels
    d'offres qu'il faut se gêner pour en faire. Ainsi, à chaque tour, chacun des
    joueurs propose secrètement un dessous de table à la mairie.
    À la fin de la phase II des joueurs, celui qui aura proposé l'offre la plus
    élevée remportera l'immense privilège de placer le monument à l'emplacement
    de son choix (Phase III).
    En cas d'égalité, celui qui jouera en dernier la phase I au prochain tour,
    parmi ceux en égalité, remporte l'enchère.
    Attention, en aucun cas ce bâtiment ne vous appartient, la mairie en
    possède toujours la propriété bien que, dans son souci de satisfaire ses
    honnêtes\footnote{Et riches.} citoyens, elle vous laisse décider de son lieu
    de construction.

\newpage
\section{Phase III} % Placement des monuments, valeur des terrains

  \subsection{} %% FIXME
    -- Patron, on a gagné. La mairie s'est finalement aperçue que le cinéma
   serait \emph{très bien} dans notre quartier.

   -- Hé, hé ! Voilà une bonne nouvelle. As-tu d'autres informations quant
    aux prochains projets de notre très chère municipalité ?

    -- Pour l'instant, non. Le budget municipal a beaucoup baissé ces derniers
    temps\ldots{}

    -- Bien ! Cela nous laisse le temps de nous développer.

    D'ici à ce que la mairie se décide à construire une nouvelle infrastructure,
    j'avais un peu de temps devant moi. Temps que je mis à profit immédiatement.

    Je contactai mes équipes et leur demandai de construire quelques maisons
    supplémentaires\ldots{} Après tout, ce cinéma allait faire monter la demande
    dans le secteur.

  \subsection{Constructions exceptionnelles}
    La construction des bâtiments est soumise aux mêmes règles que les
    maisons : ils ne peuvent donc, par conséquent, être construits qu'autour d'une route.

  \subsection{Intérêt des bâtiments spéciaux}
    Chaque bâtiment possède deux caractéristiques qui lui sont propres :
    \begin{itemize}
      \item Son \emph{prestige} qui modifie la valeur des maisons à proximité.
      \item Sa \emph{portée} qui définit sur combien de cases la valeur des
      maisons est modifiée.
    \end{itemize}

    \noindent{}Sur l'exemple de la FIG. \ref{prestige} :\\
    En B3 se trouve un cinéma au prestige de +2 et à la portée de 2.\\
    En E5 se trouve un restaurant au prestige de +3 et à la portée de 1.\\
    Les maisons en B4, C2 et D2 ont donc une valeur de 3 grâce au cinéma.\\
    La maison en E4 a une valeur de 4 grâce au restaurant.\\
    La maison en D4 a une valeur de 6 grâce au cinéma et au restaurant.\\

    \begin{figure}[!h]
      \centering
      \includegraphics{prestige.png}
      \caption{Exemple de valeurs des maisons en fonction des bâtiments à portée}
      \label{prestige}
    \end{figure}

    Certains bâtiments possèdent un prestige négatif, diminuant ainsi la valeur
    des terrains des environs.
    Dans tous les cas, la valeur d'une maison ne peut être négative.


  \subsection{Liste des bâtiments}

    Votre informateur a réussi à avoir la liste des bâtiments que la mairie
    entreprend de construire, mais il n'a malheureusement pas réussi à obtenir
    l'ordre dans lequel cela va être fait. Il semblerait d'ailleurs que la
    mairie elle-même ne le sache pas, il vous faudra donc attendre que les
    annonces officielles soient faites pour entreprendre quoi que ce soit.

    Voici la liste de votre informateur :

    %% essayer d'adopter un ton "Guide du Routard").
    \begin{itemize}
      \item \textbf{Prestige Portée Nom}. Description.

      \item \textbf{+5 1 Château fort}. Ce château fort, entièrement neuf et
	construit en pierres venues d'Europe, vous fera revivre les grands
	évènements du Moyen-Âge. Conçu par les plus grands spécialistes de cette
	époque, le Château semble \emph{plus vrai que les vrais}. De nombreux
	spectacles sont prévus, demandez la brochure à l'office du tourisme.

      \item \textbf{+4 1 Parc d'attractions}. Amateurs de sensations fortes, ce
	parc d'attractions est fait pour vous ! Venez découvrir les nombreuses
        attractions disponibles tous les jours, toute l'année\up{*}.\\
        \up{*}{\footnotesize\ Sauf attractions aquatiques ouvertes uniquement l'été.}

      \item \textbf{+4 1 Aquarium}. Qui n'a jamais rêvé de nager avec les
	dauphins ? de prendre une bonne dose d'adrénaline avec les requins ? Le
	parc aquatique vous permettra d'effleurer votre rêve et de contempler
	les plus rares espèces aquatiques. Pour le plus grand plaisir de vos
	yeux l'Aquarium est la !

      \item \textbf{+3 1 Restaurant "Le petit moscovite"}. Ce restaurant quatre
	étoiles est tenu par les plus grands cuisiniers russes de notre temps.
	Ils vous feront goûter leurs spécialités. Vodka offerte.

      \item \textbf{+3 2 Parc floral}. Un lieu de détente et de découverte
	incontournable pour son paysage sans cesse renouvelé, ses riches
	collections de fleurs, ses expositions horticoles et ses jardins
	thématiques. À découvrir d'urgence ! 

      \item \textbf{+2 2 Cinéma}. Ce cinéma tout confort vous propose les
	derniers films sortis sur le continent. Des projections en plein air
	sont proposées lors des périodes de beau temps, de quoi ravir petits et
	grands !

      \item \textbf{+2 2 Théâtre}. Un magnifique théâtre à l'italienne composé
      d'un parterre et de balcons sur plusieurs étages. En ce moment, découvrez
      en exclusivité, \textit{Platonov} d'Anton Tchekhov interprété par la
      troupe du \emph{Théâtre rouge}.

      \item \textbf{+2 2 Patinoire}. Ouverte toute l'année, cette patinoire
	propose des cours, des sessions ouvertes au public, mais aussi des
	spectacles musicaux tous les samedis soir. À ne surtout pas manquer !

      \item \textbf{+2 1 Supermarché}. Vous y trouverez tout ce dont vous pouvez
	avoir besoin au quotidien, en particulier les spécialités culinaires
	locales\up{*}\\
        \up{*}{\footnotesize\ Au rayon traiteur.}

      \item \textbf{+1 3 Lac artificiel}. Besoin de vous détendre au calme ?
	Envie de tester votre nouveau bateau télécommandé ? Alors cet endroit
	est fait pour vous ! Nombre d'habitants aiment y faire un tour après une
	rude journée de vacances.

      \item \textbf{+1 3 Centre commercial}. Un lieu indispensable pour tout adepte
	des courses qui se respecte. Vous y trouverez les vêtements à la mode
	(de la chapka pour l'hiver à la serviette de plage pour l'été), des
	magasins vous proposant des appareils technologiques derniers cris, et
	bien plus encore.

      \item \textbf{+1 2 Médiathèque}. Vous cherchez désespérément où trouver la
	bande-son de \textit{Scarface} ou encore le DVD \textit{The Godfather} ?
	N'hésitez pas à faire un tour à la médiathèque. Un lieu très apprécié,
	en particulier des jeunes.

      \item \textbf{-1 2 Aéroport}. Les amateurs d'avions ne se lasseront
	probablement pas de voir décoller ces engins sous leurs yeux. Les autres
	risquent de ne pas apprécier le bruit à sa juste valeur.

      \item \textbf{-2 1 Déchetterie}. Cette déchetterie deux étoiles a été
	optimisée spécialement pour les besoins des touristes. Des hôtesses font
	visiter gratuitement les lieux. Étrangement, ce lieu ne fait pas
	l'unanimité chez les riverains.
    \end{itemize}

\newpage
\section{Autres actions}

  \subsection{La guerre des clans}
    Cette nuit-là, je fus réveillé en pleine nuit par un énorme vacarme. Les murs
    vibrèrent quelques instants et je commençai à entendre des sirènes au loin.
    Alors que je m'apprêtais à appeler mon second, le téléphone sonna.

    -- Allô ! fis-je nerveusement

    -- C'est moi. Notre dernier immeuble flambant neuf est en flammes
    \footnote{Normal, me direz-vous\ldots{}}. D'après les pompiers sur place, cela
    ressemble à une explosion.

    -- QUOI !? criai-je. Les enfoirés ! Prépare le nécessaire, ce crime ne
    restera pas impuni.

    -- Bien reçu. Les explosifs seront prêts d'ici deux heures.

    Ainsi voulaient-ils la guerre\ldots{} Hé bien, qu'ils l'aient !

  \subsection {Destruction}
    La vengeance est un plat qui se mange froid, mais il se trouve que vous
    avez plutôt le sang chaud. Les gros feux d'artifice vous fascinent
    depuis votre plus tendre enfance et, aujourd'hui, vous avez l'occasion d'en
    faire de gigantesques !
    Durant les phases I et III du jeu vous pouvez détruire n'importe quelle
    maison en payant le prix de celle-ci moins 1 (avec un minimum de 1).
    Le terrain devient alors constructible par tous. Il est par exemple possible
    de détruire une maison et d'en construire une autre à la place, lors de la
    même phase.

  \subsection {Vente}
    Vous manquez de budget pour surpasser vos concurrents ? Pas de problème,
    vous avez à n'importe quel moment la possibilité de vendre une maison
    qui vous appartient et ainsi récupérer un nombre de roubles égal à la
    valeur de cette maison.
    La maison reste alors en jeu, mais appartient désormais à la mairie.

  \subsection {Réservation}
    L'argent c'est toujours bon d'en avoir, mais à force d'en avoir autant vous
    ne saviez même plus comment le dépenser. Voilà la solution que vous
    attendiez afin de remédier à ce terrible problème.
    Durant la phase I vous avez la possibilité de réserver une case en payant
    la valeur du terrain moins 1 rouble (avec un minimum de 1 rouble).
    Vous serez alors le seul à pouvoir construire (qu'il s'agisse d'une route,
    d'une maison ou encore d'un bâtiment spécial) sur cette case.
    Attention, si vous construisez une maison sur cette case et qu'une fuite de
    gaz insoupçonnée venait à détruire la maison la case ne vous serait plus
    réservée !

    Comme pour la construction de bâtiments, la réservation d'une case ne peut
    en aucun cas bloquer le jeu. Il faut toujours que les autres joueurs
    puissent construire une route sortant de la ville.

\newpage
\section{Fin de la partie}

    L'île est à présent prospère et la place commence à manquer. Cela
    tombe bien puisque la mairie a décidé de ne plus construire de bâtiment.
    Le nombre de bâtiments que la mairie pourra construire durant une partie
    est défini par MAX\_MONUMENTS\footnote{cf. API}.
    Lorsque le dernier bâtiment est construit, un dernier tour composé
    uniquement de la phase I est joué. À la fin de ce tour, le joueur ayant le
    score le plus élevé remporte la partie.

    Le score d'un joueur sur une partie correspond à la somme d'argent qu'il 
    possède plus la valeur de chaque maison qu'il détient.\\

    Pour établir un classment, à la fin du concours, un tounoi sera organisé.
    Lors de chaque partie, le vainqueur gagne 3 points, le deuxième 1 et le
    dernier n'en gagne aucun. Si deux ou trois joueurs sont ex-æquo, ils
    reçoivent chacun le nombre de point minimal parmi les nombres de points qui
    leur reviennent. Par exemple, si les deux premiers joueurs sont ex-æquo, ils
    reçoivent chacun un point. Si les trois joueurs sont ex-æquo, ils
    n'obtiennent aucun point. % améliorer ça ?

  \subsection{Épilogue}
    Pour la première fois depuis des semaines, le téléphone sonna.

    -- Allô, répondis-je machinalement.

    -- C'est moi, m'indiqua le téléphone. J'ai un plan à te proposer.

    Je reconnus aussitôt mon interlocuteur. C'est lui qui m'avait mis
    sur la piste de cette île, et qui de fait m'avait offert une retraite
    en or massif. Mais pourquoi me faisait-il une nouvelle offre alors que
    nous avions déjà un marché en cours ? Toutefois, avant que je ne
    pusse protester, le téléphone enchaîna :

    -- C'est fini pour l'île. Toute l'île est occupée, la mairie ne veut plus
    rien construire. Si tu veux rester à te tourner les pouces, libre à toi.
    Mais j'ai un \emph{gros} plan. Sans risque.

    Il m'expliqua ensuite le concept\ldots{}

    Quelques heures plus tard, je reprenais le bateau en direction du
    continent\ldots{}

\newpage
\section{API}
\input{api}

\end{document}
